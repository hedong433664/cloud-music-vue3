import{U as V,ab as k,r as _,o as D,n as L,y as a,z as e,a0 as T,N as p,a as h,ad as U,A as l,ae as B,V as M,al as N,a8 as P,ag as z,W as Y,$,q as S,ah as j,am as H,aj as R}from"./index-DeY7Z7hI.js";import{E as q,a as O}from"./tab-pane-PqflDKKA.js";import"./index-BlGJXSWm.js";const W={class:"album-Detail_container layout-content"},F={class:"header"},G={class:"cover"},J={class:"info"},K={class:"up-box"},Q={class:"playlist-title"},X={class:"creator"},Z={class:"created-time"},aa={class:"down-box"},ta={class:"content"},sa=["innerHTML"],ea={__name:"AlbumDetail",setup(oa){const m=P(),A=$(),C=k(),t=_({}),v=_([]),f=_("playlist");async function I(){const{startLoading:i,stopLoading:s}=M();try{i();const{album:n,songs:r}=await N({id:m.params.id});t.value=n,v.value=r,t.value.description=t.value.description.replace(/\n/g,"<br/>");const o=new Image;o.src=n.blurPicUrl,o.crossOrigin="Anonymous",o.onload=async()=>{const u=await new z().getColor(o);Y(u),document.documentElement.style.setProperty("--body-before-opacity",1)}}finally{s()}}function w(){C.playAll(t.value.tracks)}function x(i){A.push(`/userInfo/${i}`)}return D(()=>{I()}),(i,s)=>{var y,b;const n=T,r=B,o=H,c=O,u=R,E=q;return S(),L("div",W,[a("div",F,[a("div",G,[e(n,{src:t.value.blurPicUrl},null,8,["src"])]),a("div",J,[a("div",K,[a("p",Q,p(t.value.name),1),a("div",X,[e(n,{src:(y=t.value.artist)==null?void 0:y.picUrl},null,8,["src"]),a("span",{class:"author",onClick:s[0]||(s[0]=d=>{var g;return x((g=t.value.artist)==null?void 0:g.id)})},p((b=t.value.artist)==null?void 0:b.name),1),a("span",Z,p(h(U)(t.value.publishTime).format("YYYY-MM-DD"))+"发布",1)])]),a("div",aa,[e(r,{class:"play-all-btn",type:"primary",onClick:s[1]||(s[1]=d=>w())},{default:l(()=>s[3]||(s[3]=[a("i",{class:"iconfont icon-bofang-solid"},null,-1),j(" 播放全部 ")])),_:1,__:[3]})])])]),a("div",ta,[e(E,{modelValue:f.value,"onUpdate:modelValue":s[2]||(s[2]=d=>f.value=d)},{default:l(()=>[e(c,{label:"歌曲",name:"playlist",lazy:""},{default:l(()=>[e(o,{"song-list":v.value},null,8,["song-list"])]),_:1}),e(c,{label:"评论",name:"review",lazy:""},{default:l(()=>[e(u,{id:h(m).params.id,type:"2","target-type":"2"},null,8,["id"])]),_:1}),e(c,{label:"专辑详情",name:"description",lazy:""},{default:l(()=>[a("div",{class:"description",innerHTML:t.value.description},null,8,sa)]),_:1})]),_:1},8,["modelValue"])])])}}},ca=V(ea,[["__scopeId","data-v-29576a9c"]]);export{ca as default};
