import{b as W,a3 as Y,_ as j,k as D,r as _,a4 as H,l as M,c as K,Q as z,o as L,a5 as F,v as R,q as U,A as y,J,K as O,E as Q,a as S,a6 as G,a7 as X,R as Z,a8 as B,$ as N,w as tt,a9 as et,aa as at,U as st,ab as lt,n as ot,y as s,z as i,a0 as nt,N as C,ac as it,ad as rt,ae as ct,V as ut,af as dt,ag as pt,W as ft,ah as $,ai as mt,aj as _t,ak as vt}from"./index-_3PHL2wt.js";import{E as yt,a as gt}from"./tab-pane-0-opJJWQ.js";import"./index-Cp7jB-fh.js";const ht=W({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:Y,default:""},truncated:Boolean,lineClamp:{type:[String,Number]},tag:{type:String,default:"span"}}),bt=D({name:"ElText"}),Ct=D({...bt,props:ht,setup(w){const l=w,o=_(),g=H(),t=M("text"),h=K(()=>[t.b(),t.m(l.type),t.m(g.value),t.is("truncated",l.truncated),t.is("line-clamp",!z(l.lineClamp))]),d=()=>{var a,n,b,p,x,k,r;if(X().title)return;let c=!1;const f=((a=o.value)==null?void 0:a.textContent)||"";if(l.truncated){const m=(n=o.value)==null?void 0:n.offsetWidth,u=(b=o.value)==null?void 0:b.scrollWidth;m&&u&&u>m&&(c=!0)}else if(!z(l.lineClamp)){const m=(p=o.value)==null?void 0:p.offsetHeight,u=(x=o.value)==null?void 0:x.scrollHeight;m&&u&&u>m&&(c=!0)}c?(k=o.value)==null||k.setAttribute("title",f):(r=o.value)==null||r.removeAttribute("title")};return L(d),F(d),(a,n)=>(U(),R(G(a.tag),{ref_key:"textRef",ref:o,class:Q(S(h)),style:O({"-webkit-line-clamp":a.lineClamp})},{default:y(()=>[J(a.$slots,"default")]),_:3},8,["class","style"]))}});var xt=j(Ct,[["__file","text.vue"]]);const kt=Z(xt),St={__name:"Collector",setup(w){const l=B(),o=N(),g=_(null),t=_({id:l.params.id,limit:30,offset:0});async function h(){const a=await at({id:l.params.id,limit:t.value.limit,offset:t.value.offset});return{content:a.subscribers,totalElements:a.total}}function d(a){o.push(`/userInfo/${a.userId}`)}return tt(l,()=>{t.value.id=l.query.id,t.value.offset=0,g.value.handleSearch()},{deep:!0}),(a,n)=>{const b=et;return U(),R(b,{ref_key:"SearchCardListRef",ref:g,offset:t.value.offset,"onUpdate:offset":n[0]||(n[0]=p=>t.value.offset=p),limit:t.value.limit,"onUpdate:limit":n[1]||(n[1]=p=>t.value.limit=p),request:h,"show-icon":!1,"cover-key":"avatarUrl","name-key":"nickname",round:"",onItemClick:d},null,8,["offset","limit"])}}},wt={class:"playlist-detail_container layout-content"},Tt={class:"header"},Ut={class:"cover"},It={class:"play-counts"},Pt={class:"counts"},At={class:"info"},Et={class:"up-box"},zt={class:"playlist-title"},$t={class:"playlist-desc"},Dt={class:"creator"},Lt={class:"tags"},Rt={class:"created-time"},Bt={class:"down-box"},Nt={class:"content"},Vt={__name:"PlayListDetail",setup(w){const l=B(),o=N(),g=lt(),t=_({}),h=_(0),d=_(0),a=_(30),n=_("playlist");async function b(){const{startLoading:r,stopLoading:e}=ut();try{r();const{playlist:c}=await dt({id:l.params.id});t.value=c,h.value=c.trackCount;const f=new Image;f.src=t.value.coverImgUrl,f.crossOrigin="Anonymous",f.onload=async()=>{const u=await new pt().getColor(f);ft(u),document.documentElement.style.setProperty("--body-before-opacity",1)}}finally{e()}}async function p(){const{songs:r}=await vt({id:l.params.id,limit:a.value,offset:d.value});return{content:r,totalElements:h.value}}function x(){g.playAll(t.value.tracks)}function k(r){o.push(`/userInfo/${r}`)}return L(()=>{b()}),(r,e)=>{var I,P,A;const c=nt,f=kt,m=ct,u=mt,T=gt,V=_t,q=yt;return U(),ot("div",wt,[s("div",Tt,[s("div",Ut,[i(c,{src:t.value.coverImgUrl},null,8,["src"]),s("div",It,[e[5]||(e[5]=s("i",{class:"iconfont icon-bofang-solid"},null,-1)),s("span",Pt,C(S(it)(t.value.playCount)),1)])]),s("div",At,[s("div",Et,[s("p",zt,C(t.value.name),1),s("p",$t,[i(f,{"line-clamp":"2"},{default:y(()=>[$(C(t.value.description),1)]),_:1})]),s("div",Dt,[i(c,{src:(I=t.value.creator)==null?void 0:I.avatarUrl},null,8,["src"]),s("span",{class:"author",onClick:e[0]||(e[0]=v=>{var E;return k((E=t.value.creator)==null?void 0:E.userId)})},C((P=t.value.creator)==null?void 0:P.nickname),1),s("span",Lt,"标签："+C(((A=t.value.algTags)==null?void 0:A.join("/"))||"--"),1),s("span",Rt,C(S(rt)(t.value.createTime).format("YYYY-MM-DD"))+"创建",1)])]),s("div",Bt,[i(m,{class:"play-all-btn",type:"primary",onClick:e[1]||(e[1]=v=>x())},{default:y(()=>e[6]||(e[6]=[s("i",{class:"iconfont icon-bofang-solid"},null,-1),$(" 播放全部 ")])),_:1,__:[6]})])])]),s("div",Nt,[i(q,{modelValue:n.value,"onUpdate:modelValue":e[4]||(e[4]=v=>n.value=v)},{default:y(()=>[i(T,{label:"歌曲",name:"playlist",lazy:""},{default:y(()=>[i(u,{ref:"SearchTableRef",offset:d.value,"onUpdate:offset":e[2]||(e[2]=v=>d.value=v),limit:a.value,"onUpdate:limit":e[3]||(e[3]=v=>a.value=v),request:p},null,8,["offset","limit"])]),_:1}),i(T,{label:"评论",name:"review",lazy:""},{default:y(()=>[i(V,{id:S(l).params.id,type:"2","target-type":"1"},null,8,["id"])]),_:1}),i(T,{label:"收藏者",name:"collector",lazy:""},{default:y(()=>[i(St)]),_:1})]),_:1},8,["modelValue"])])])}}},jt=st(Vt,[["__scopeId","data-v-b2978981"]]);export{jt as default};
