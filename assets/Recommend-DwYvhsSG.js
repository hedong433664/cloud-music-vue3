import{b as pe,i as Pe,u as He,r as C,c as V,a as e,t as fe,w as Y,s as ze,o as _e,d as Ve,e as ge,p as Oe,f as Re,g as De,h as Ge,j as ye,C as Ue,_ as Ie,k as ee,l as Ce,m as Ke,n as B,q as w,v as x,x as F,y as M,z as P,A as O,B as J,D as q,E as z,F as de,G as We,H as Q,T as me,I as je,J as we,K as Se,L as le,M as re,N as Fe,O as Xe,P as Ye,Q as qe,R as Je,S as Qe,U as Ze,V as xe,W as et,X as tt,Y as at,Z as nt,$ as st,a0 as ot,a1 as lt,a2 as rt}from"./index-DeY7Z7hI.js";import{u as it}from"./index-BlGJXSWm.js";const ut=pe({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},cardScale:{type:Number,default:.83},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0},motionBlur:Boolean}),ct={change:(o,i)=>[o,i].every(Pe)},be=Symbol("carouselContextKey"),ie="ElCarouselItem",he=300,vt=(o,i,m)=>{const{children:s,addChild:N,removeChild:h,ChildrenSorter:k}=it(ye(),ie),c=He(),a=C(-1),_=C(null),g=C(!1),y=C(),E=C(0),p=C(!0),L=V(()=>o.arrow!=="never"&&!e(T)),I=V(()=>s.value.some(t=>t.props.label.toString().length>0)),$=V(()=>o.type==="card"),T=V(()=>o.direction==="vertical"),D=V(()=>o.height!=="auto"?{height:o.height}:{height:`${E.value}px`,overflow:"hidden"}),G=fe(t=>{b(t)},he,{trailing:!0}),l=fe(t=>{j(t)},he),r=t=>p.value?a.value<=1?t<=1:t>1:!0;function v(){_.value&&(clearInterval(_.value),_.value=null)}function f(){o.interval<=0||!o.autoplay||_.value||(_.value=setInterval(()=>S(),o.interval))}const S=()=>{a.value<s.value.length-1?a.value=a.value+1:o.loop&&(a.value=0)};function b(t){if(Ge(t)){const H=s.value.filter(W=>W.props.name===t);H.length>0&&(t=s.value.indexOf(H[0]))}if(t=Number(t),Number.isNaN(t)||t!==Math.floor(t))return;const u=s.value.length,A=a.value;t<0?a.value=o.loop?u-1:0:t>=u?a.value=o.loop?0:u-1:a.value=t,A===a.value&&n(A),Z()}function n(t){s.value.forEach((u,A)=>{u.translateItem(A,a.value,t)})}function U(t,u){var A,H,W,ue;const X=e(s),ce=X.length;if(ce===0||!t.states.inStage)return!1;const Me=u+1,Ne=u-1,ve=ce-1,$e=X[ve].states.active,Be=X[0].states.active,Le=(H=(A=X[Me])==null?void 0:A.states)==null?void 0:H.active,Ae=(ue=(W=X[Ne])==null?void 0:W.states)==null?void 0:ue.active;return u===ve&&Be||Le?"left":u===0&&$e||Ae?"right":!1}function te(){g.value=!0,o.pauseOnHover&&v()}function ae(){g.value=!1,f()}function ne(t){e(T)||s.value.forEach((u,A)=>{t===U(u,A)&&(u.states.hover=!0)})}function se(){e(T)||s.value.forEach(t=>{t.states.hover=!1})}function d(t){a.value=t}function j(t){o.trigger==="hover"&&t!==a.value&&(a.value=t)}function K(){b(a.value-1)}function R(){b(a.value+1)}function Z(){v(),o.pauseOnHover||f()}function Ee(t){o.height==="auto"&&(E.value=t)}function Te(){var t;const u=(t=c.default)==null?void 0:t.call(c);if(!u)return null;const H=Re(u).filter(W=>De(W)&&W.type.name===ie);return(H==null?void 0:H.length)===2&&o.loop&&!$.value?(p.value=!0,H):(p.value=!1,null)}Y(()=>a.value,(t,u)=>{n(u),p.value&&(t=t%2,u=u%2),u>-1&&i(Ue,t,u)}),Y(()=>o.autoplay,t=>{t?f():v()}),Y(()=>o.loop,()=>{b(a.value)}),Y(()=>o.interval,()=>{Z()});const oe=ze();return _e(()=>{Y(()=>s.value,()=>{s.value.length>0&&b(o.initialIndex)},{immediate:!0}),oe.value=Ve(y.value,()=>{n()}),f()}),ge(()=>{v(),y.value&&oe.value&&oe.value.stop()}),Oe(be,{root:y,isCardType:$,isVertical:T,items:s,loop:o.loop,cardScale:o.cardScale,addItem:N,removeItem:h,setActiveItem:b,setContainerHeight:Ee}),{root:y,activeIndex:a,arrowDisplay:L,hasLabel:I,hover:g,isCardType:$,items:s,isVertical:T,containerStyle:D,isItemsTwoLength:p,handleButtonEnter:ne,handleButtonLeave:se,handleIndicatorClick:d,handleMouseEnter:te,handleMouseLeave:ae,setActiveItem:b,prev:K,next:R,PlaceholderItem:Te,isTwoLengthShow:r,ItemsSorter:k,throttledArrowClick:G,throttledIndicatorHover:l}},ft="ElCarousel",dt=ee({name:ft}),mt=ee({...dt,props:ut,emits:ct,setup(o,{expose:i,emit:m}){const s=o,{root:N,activeIndex:h,arrowDisplay:k,hasLabel:c,hover:a,isCardType:_,items:g,isVertical:y,containerStyle:E,handleButtonEnter:p,handleButtonLeave:L,handleIndicatorClick:I,handleMouseEnter:$,handleMouseLeave:T,setActiveItem:D,prev:G,next:l,PlaceholderItem:r,isTwoLengthShow:v,ItemsSorter:f,throttledArrowClick:S,throttledIndicatorHover:b}=vt(s,m),n=Ce("carousel"),{t:U}=Ke(),te=V(()=>{const d=[n.b(),n.m(s.direction)];return e(_)&&d.push(n.m("card")),d}),ae=V(()=>{const d=[n.e("indicators"),n.em("indicators",s.direction)];return e(c)&&d.push(n.em("indicators","labels")),s.indicatorPosition==="outside"&&d.push(n.em("indicators","outside")),e(y)&&d.push(n.em("indicators","right")),d});function ne(d){if(!s.motionBlur)return;const j=e(y)?`${n.namespace.value}-transitioning-vertical`:`${n.namespace.value}-transitioning`;d.currentTarget.classList.add(j)}function se(d){if(!s.motionBlur)return;const j=e(y)?`${n.namespace.value}-transitioning-vertical`:`${n.namespace.value}-transitioning`;d.currentTarget.classList.remove(j)}return i({activeIndex:h,setActiveItem:D,prev:G,next:l}),(d,j)=>(w(),B("div",{ref_key:"root",ref:N,class:z(e(te)),onMouseenter:q(e($),["stop"]),onMouseleave:q(e(T),["stop"])},[e(k)?(w(),x(me,{key:0,name:"carousel-arrow-left",persisted:""},{default:O(()=>[J(M("button",{type:"button",class:z([e(n).e("arrow"),e(n).em("arrow","left")]),"aria-label":e(U)("el.carousel.leftArrow"),onMouseenter:K=>e(p)("left"),onMouseleave:e(L),onClick:q(K=>e(S)(e(h)-1),["stop"])},[P(e(de),null,{default:O(()=>[P(e(We))]),_:1})],42,["aria-label","onMouseenter","onMouseleave","onClick"]),[[Q,(d.arrow==="always"||e(a))&&(s.loop||e(h)>0)]])]),_:1})):F("v-if",!0),e(k)?(w(),x(me,{key:1,name:"carousel-arrow-right",persisted:""},{default:O(()=>[J(M("button",{type:"button",class:z([e(n).e("arrow"),e(n).em("arrow","right")]),"aria-label":e(U)("el.carousel.rightArrow"),onMouseenter:K=>e(p)("right"),onMouseleave:e(L),onClick:q(K=>e(S)(e(h)+1),["stop"])},[P(e(de),null,{default:O(()=>[P(e(je))]),_:1})],42,["aria-label","onMouseenter","onMouseleave","onClick"]),[[Q,(d.arrow==="always"||e(a))&&(s.loop||e(h)<e(g).length-1)]])]),_:1})):F("v-if",!0),M("div",{class:z(e(n).e("container")),style:Se(e(E)),onTransitionstart:ne,onTransitionend:se},[P(e(r)),we(d.$slots,"default")],38),P(e(f),null,{default:O(()=>[d.indicatorPosition!=="none"?(w(),B("ul",{key:0,class:z(e(ae))},[(w(!0),B(le,null,re(e(g),(K,R)=>J((w(),B("li",{key:R,class:z([e(n).e("indicator"),e(n).em("indicator",d.direction),e(n).is("active",R===e(h))]),onMouseenter:Z=>e(b)(R),onClick:q(Z=>e(I)(R),["stop"])},[M("button",{class:z(e(n).e("button")),"aria-label":e(U)("el.carousel.indicator",{index:R+1})},[e(c)?(w(),B("span",{key:0},Fe(K.props.label),1)):F("v-if",!0)],10,["aria-label"])],42,["onMouseenter","onClick"])),[[Q,e(v)(R)]])),128))],2)):F("v-if",!0)]),_:1}),s.motionBlur?(w(),B("svg",{key:2,xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{display:"none"}},[M("defs",null,[M("filter",{id:"elCarouselHorizontal"},[M("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"12,0"})]),M("filter",{id:"elCarouselVertical"},[M("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"0,10"})])])])):F("v-if",!0)],42,["onMouseenter","onMouseleave"]))}});var ht=Ie(mt,[["__file","carousel.vue"]]);const pt=pe({name:{type:String,default:""},label:{type:[String,Number],default:""}}),_t=o=>{const i=Xe(be),m=ye(),s=C(),N=C(!1),h=C(0),k=C(1),c=C(!1),a=C(!1),_=C(!1),g=C(!1),{isCardType:y,isVertical:E,cardScale:p}=i;function L(l,r,v){const f=v-1,S=r-1,b=r+1,n=v/2;return r===0&&l===f?-1:r===f&&l===0?v:l<S&&r-l>=n?v+1:l>b&&l-r>=n?-2:l}function I(l,r){var v,f;const S=e(E)?((v=i.root.value)==null?void 0:v.offsetHeight)||0:((f=i.root.value)==null?void 0:f.offsetWidth)||0;return _.value?S*((2-p)*(l-r)+1)/4:l<r?-(1+p)*S/4:(3+p)*S/4}function $(l,r,v){const f=i.root.value;return f?((v?f.offsetHeight:f.offsetWidth)||0)*(l-r):0}const T=(l,r,v)=>{var f;const S=e(y),b=(f=i.items.value.length)!=null?f:Number.NaN,n=l===r;!S&&!qe(v)&&(g.value=n||l===v),!n&&b>2&&i.loop&&(l=L(l,r,b));const U=e(E);c.value=n,S?(_.value=Math.round(Math.abs(l-r))<=1,h.value=I(l,r),k.value=e(c)?1:p):h.value=$(l,r,U),a.value=!0,n&&s.value&&i.setContainerHeight(s.value.offsetHeight)};function D(){if(i&&e(y)){const l=i.items.value.findIndex(({uid:r})=>r===m.uid);i.setActiveItem(l)}}const G={props:o,states:Ye({hover:N,translate:h,scale:k,active:c,ready:a,inStage:_,animating:g}),uid:m.uid,getVnode:()=>m.vnode,translateItem:T};return i.addItem(G),ge(()=>{i.removeItem(G)}),{carouselItemRef:s,active:c,animating:g,hover:N,inStage:_,isVertical:E,translate:h,isCardType:y,scale:k,ready:a,handleItemClick:D}},gt=ee({name:ie}),yt=ee({...gt,props:pt,setup(o){const i=o,m=Ce("carousel"),{carouselItemRef:s,active:N,animating:h,hover:k,inStage:c,isVertical:a,translate:_,isCardType:g,scale:y,ready:E,handleItemClick:p}=_t(i),L=V(()=>[m.e("item"),m.is("active",N.value),m.is("in-stage",c.value),m.is("hover",k.value),m.is("animating",h.value),{[m.em("item","card")]:g.value,[m.em("item","card-vertical")]:g.value&&a.value}]),I=V(()=>{const T=`${`translate${e(a)?"Y":"X"}`}(${e(_)}px)`,D=`scale(${e(y)})`;return{transform:[T,D].join(" ")}});return($,T)=>J((w(),B("div",{ref_key:"carouselItemRef",ref:s,class:z(e(L)),style:Se(e(I)),onClick:e(p)},[e(g)?J((w(),B("div",{key:0,class:z(e(m).e("mask"))},null,2)),[[Q,!e(N)]]):F("v-if",!0),we($.$slots,"default")],14,["onClick"])),[[Q,e(E)]])}});var ke=Ie(yt,[["__file","carousel-item.vue"]]);const It=Je(ht,{CarouselItem:ke}),Ct=Qe(ke),wt={class:"recommend_wrapper layout-content"},St={class:"banner"},bt={class:"recommend-playlist"},kt={__name:"Recommend",setup(o){const i=st(),m=C([]),s=C([]);async function N(){const c=await at();m.value=c.banners}async function h(){const{result:c}=await nt();s.value=c}function k(c){i.push(`/playlistDetail/${c.id}`)}return _e(()=>{const{startLoading:c,stopLoading:a}=xe();c(),Promise.all([N(),h()]).then(a),et()}),(c,a)=>{const _=ot,g=Ct,y=It,E=rt,p=lt,L=tt;return w(),B("div",wt,[M("div",St,[P(y,{interval:4e3,type:"card",height:"200px"},{default:O(()=>[(w(!0),B(le,null,re(m.value,I=>(w(),x(g,{key:I.targetId},{default:O(()=>[P(_,{style:{width:"100%",height:"220px","border-radius":"10px"},src:I.imageUrl,lazy:""},null,8,["src"])]),_:2},1024))),128))]),_:1})]),M("div",bt,[a[0]||(a[0]=M("div",{class:"title"}," 推荐歌单 ",-1)),P(L,{gutter:30},{default:O(()=>[(w(!0),B(le,null,re(s.value,I=>(w(),x(p,{key:I.id,span:4},{default:O(()=>[P(E,{"cover-url":I.picUrl,"play-count":I.playCount,name:I.name,onClick:$=>k(I)},null,8,["cover-url","play-count","name","onClick"])]),_:2},1024))),128))]),_:1})])])}}},Mt=Ze(kt,[["__scopeId","data-v-646d491d"]]);export{Mt as default};
